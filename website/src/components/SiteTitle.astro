---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/SiteTitle.astro';
import { readFileSync } from 'fs';
import { resolve } from 'path';

// Read version from package.json
const packagePath = resolve(process.cwd(), 'package.json');
const packageJson = JSON.parse(readFileSync(packagePath, 'utf-8'));
const version = packageJson.version;
---

<Default {...Astro.props}><slot /></Default>
<span class="version-badge">v{version}</span>

<style>

  .version-badge {
    margin-left: 0.5rem;
    background: var(--sl-color-accent-high);
    color: var(--sl-color-white);
    padding: 0.125rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 600;
    opacity: 0.9;
    display: flex;
    align-items: center;
  }

</style>
